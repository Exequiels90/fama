{% extends "admin_base.html" %}

{% if product %}
  {% set page_title = 'Editar producto' %}
{% else %}
  {% set page_title = 'Nuevo producto' %}
{% endif %}

{% block title %}Admin - {{ page_title }}{% endblock %}

{% block content %}
<h3 class="mb-3">{{ page_title }}</h3>

<form method="post">
  <div class="form-row">
    <div class="form-group col-md-8">
      <label for="name">Nombre</label>
      <input type="text" class="form-control" id="name" name="name" required value="{{ product.name if product else '' }}">
    </div>
    <div class="form-group col-md-4">
      <label for="price">Precio (ARS)</label>
      <input type="number" step="0.01" min="0" class="form-control" id="price" name="price" required value="{{ product.price_ars if product else '' }}">
    </div>
  </div>

  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="stock">Stock</label>
      <input type="number" min="0" class="form-control" id="stock" name="stock" value="{{ product.stock if product else 0 }}">
    </div>
    <div class="form-group col-md-4">
      <label for="category_id">Categoría</label>
      <select id="category_id" name="category_id" class="form-control">
        <option value="">Sin categoría</option>
        {% for category in categories %}
          <option value="{{ category.id }}" {% if product and product.category_id == category.id %}selected{% endif %}>
            {{ category.name }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group col-md-4 d-flex align-items-center">
      <div class="form-check mt-3">
        <input class="form-check-input" type="checkbox" id="is_active" name="is_active" {% if not product or product.is_active %}checked{% endif %}>
        <label class="form-check-label" for="is_active">
          Activo (visible en tienda)
        </label>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="image_url">URL de imagen</label>
    <input type="text" class="form-control" id="image_url" name="image_url" value="{{ product.image_url if product else '' }}" placeholder="https://... o ruta relativa /img/producto.jpg">
  </div>

  <div class="form-group">
    <label for="description">Descripción</label>
    <textarea class="form-control" id="description" name="description" rows="4">{{ product.description if product else '' }}</textarea>
  </div>

  <button type="submit" class="btn btn-primary">Guardar</button>
  <a href="{{ url_for('admin_products') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}


