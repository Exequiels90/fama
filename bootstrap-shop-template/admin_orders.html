{% extends "admin_base.html" %}

{% block title %}Admin - Pedidos{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Pedidos</h3>
  <form class="form-inline" method="get">
    <label class="mr-2" for="status">Estado:</label>
    <select id="status" name="status" class="form-control form-control-sm mr-2">
      <option value="">Todos</option>
      <option value="pendiente" {% if request.args.get('status') == 'pendiente' %}selected{% endif %}>Pendiente</option>
      <option value="pagado" {% if request.args.get('status') == 'pagado' %}selected{% endif %}>Pagado</option>
      <option value="cancelado" {% if request.args.get('status') == 'cancelado' %}selected{% endif %}>Cancelado</option>
    </select>
    <button type="submit" class="btn btn-sm btn-primary">Filtrar</button>
  </form>
}</div>

<table class="table table-striped table-bordered table-sm">
  <thead class="thead-light">
    <tr>
      <th>ID</th>
      <th>Fecha</th>
      <th>Cliente</th>
      <th>Total (ARS)</th>
      <th>Estado</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
      <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.created_at.strftime('%d/%m/%Y %H:%M') if order.created_at else '' }}</td>
        <td>{{ order.customer_name or '-' }}</td>
        <td>${{ '%.2f'|format(order.total_amount_ars|float) }}</td>
        <td>{{ order.status }}</td>
        <td>
          <a href="{{ url_for('admin_order_detail', order_id=order.id) }}" class="btn btn-sm btn-info">Ver</a>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="6" class="text-center">No hay pedidos registrados.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}


